{% extends 'base.html' %}
{% block body %}
{% load static %}
    <script defer src="https://maps.googleapis.com/maps/api/js?key={{api_key}}&callback=initMap"></script>
    <script>
        var lat,lng;
        window.initMap = function () {
            const map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: {{current_lat}}, lng: {{current_lng}}},
                zoom: 13,
            });
            map.addListener("click",function(e){
                placeMarkerAndPanTo(e.latLng, map);
                console.log(e.latLng)
                lat = e.latLng['lat']
                lng = e.latLng['lng']
                })
            function placeMarkerAndPanTo(latLng, map){
                new google.maps.Marker({
                    position: latLng,
                    map: map,
                });
                {#map.panTo(latLng);#}
            }
        };
    </script>



    <div>

        <br><br><br>
    </div>
    <div class="container bg-dark index-content-box">
        <form id="byCurrent" method="POST" action="result">
            {% csrf_token %}
            <div class="container current-location-box">
                <div class="container current-range-box">
                    <select name="selectCurrentLocationRange"
                            class="form-select">
                        <option selected value="1">Searching Range from your location</option>
                        <option value="1">300m以内</option>
                        <option value="2">500m以内</option>
                        <option value="3">1km以内</option>
                        <option value="4">2km以内</option>
                        <option value="5">3km以内</option>
                    </select>
                </div>
                <div class="container current-order-box">
                    <!--order value 4=권장순, others=거리순 -->
                    <!--거리순-->
                    <input type="radio" class="btn-check" id="CurrentOrderRange"
                           name="selectCurrentLocationOrder" value="1" checked>
                    <label class="btn btn-outline-primary" for="CurrentOrderRange">距離順</label>
                    <div class="vr"></div>
                    <!--권장순-->
                    <input type="radio" class="btn-check" id="CurrentOrderBest"
                           name="selectCurrentLocationOrder" value="4">
                    <label class="btn btn-outline-success" for="CurrentOrderBest">オススメ順</label>
                </div>
                <div class="container current-submit-box">
                    <input type="submit"
                           class="btn btn-secondary"
                           id="submitCurrentLocation"
                           value="search by current location">
                </div>
            </div>
        </form>

        <br>
        <br>

        <form id="bySelected" method="POST" action="result">
            {% csrf_token %}
            <div class="container select-location-box">
                <div class="container index-map-box">
                <!--구글맵과 연동해서 원하는 좌표를 찍어내는 식으로 하고 싶은데 그거 넣는 영역 -->
                    <div id="map"></div>
                </div>
                <div class="container select-range-box">
                        <select name="selectSelectedLocationRange"
                                class="form-select">
                            <option selected value="1">Searching Range from select location</option>
                            <option value="1">300m以内</option>
                            <option value="2">500m以内</option>
                            <option value="3">1km以内</option>
                            <option value="4">2km以内</option>
                            <option value="5">3km以内</option>
                        </select>
                </div>
                <div class="container select-order-box">
                        <!--order value 4=권장순, others=거리순 -->
                        <!--거리순-->
                        <input type="radio" class="btn-check" id="SelectedOrderRange"
                               name="selectSelectedLocationOrder" value="1" checked>
                        <label class="btn btn-outline-primary" for="SelectedOrderRange">距離順</label>
                        <div class="vr"></div>
                        <!--권장순-->
                        <input type="radio" class="btn-check" id="SelectedOrderBest"
                               name="selectSelectedLocationOrder" value="4">
                        <label class="btn btn-outline-success" for="SelectedOrderBest">オススメ順</label>
                </div>
                <div class="container current-submit-box">
                    <input type="submit"
                           class="btn btn-secondary"
                           id="submitSelectedLocation"
                           value="search by selected location">
                </div>
            </div>
        </form>
    </div>
{% endblock %}